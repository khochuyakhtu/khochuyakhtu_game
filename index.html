<!DOCTYPE html>
<html lang="uk">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–•–æ—á—É –Ø—Ö—Ç—É: Ultimate Survival</title>
    <!-- Telegram Web App SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="css/style.css">
</head>

<body class="text-slate-200">

    <canvas id="game-canvas"></canvas>
    <div id="cold-vignette"></div>
    <div id="damage-overlay" class="absolute top-0 left-0 w-full h-full pointer-events-none"></div>

    <!-- HUD -->
    <div class="ui-layer flex flex-col justify-between p-3 pointer-events-none">

        <!-- Top Bar -->
        <div class="flex justify-between items-start w-full pointer-events-auto"
            style="padding-top: var(--tg-viewport-stable-height, 0px);">
            <!-- Stats -->
            <div class="flex flex-col gap-2">
                <div
                    class="bg-slate-900/90 p-2 rounded-lg border border-slate-700 shadow-xl flex items-center gap-3 min-w-[120px]">
                    <span class="text-xl">üíµ</span>
                    <div>
                        <div class="text-[10px] text-slate-400 uppercase font-bold tracking-wider">–ë—é–¥–∂–µ—Ç</div>
                        <div class="font-mono text-lg text-green-400 leading-none" id="money-display">0</div>
                    </div>
                </div>

                <div class="bg-slate-900/90 p-2 rounded-lg border border-slate-700 w-48 space-y-2">
                    <div>
                        <div class="flex justify-between text-[10px] mb-0.5">
                            <span class="text-slate-400">üõ°Ô∏è –ë—Ä–æ–Ω—è</span>
                            <span id="armor-val" class="text-white font-bold">Lvl 0</span>
                        </div>
                        <div class="w-full bg-slate-800 h-1.5 rounded-full overflow-hidden">
                            <div id="hp-bar" class="bg-emerald-500 h-full w-full transition-all duration-300"></div>
                        </div>
                    </div>
                    <div>
                        <div class="flex justify-between text-[10px] mb-0.5">
                            <span class="text-slate-400">üå°Ô∏è –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞</span>
                            <span id="temp-val" class="text-white font-bold">36.6¬∞C</span>
                        </div>
                        <div class="w-full bg-slate-800 h-1.5 rounded-full overflow-hidden relative">
                            <div id="temp-bar" class="bg-orange-400 h-full w-full transition-all duration-300"></div>
                        </div>
                    </div>
                </div>

                <!-- Mission Box -->
                <div id="mission-panel" class="hidden p-2 rounded-r-lg mt-2 pointer-events-none max-w-[200px]">
                    <div class="text-[10px] text-yellow-400 font-bold uppercase mb-1">–ê–∫—Ç–∏–≤–Ω–∞ –ú—ñ—Å—ñ—è</div>
                    <div id="mission-desc" class="text-sm text-white font-semibold leading-tight">–î–æ—Å—Ç–∞–≤—Ç–µ –≤–∞–Ω—Ç–∞–∂</div>
                    <div class="text-[10px] text-slate-400 mt-1 flex justify-between">
                        <span id="mission-dist">0m</span>
                        <span class="text-green-400" id="mission-reward">$100</span>
                    </div>
                </div>
            </div>

            <!-- Settings / Garage -->
            <div class="flex flex-col gap-2 items-end">
                <div class="bg-slate-900/90 p-2 rounded-lg border border-slate-700 text-right min-w-[100px]">
                    <div id="biome-display" class="text-sm font-bold text-cyan-300">üèùÔ∏è –¢—Ä–æ–ø—ñ–∫–∏</div>
                    <div class="text-[9px] text-slate-500 mt-1">–î–µ–Ω—å: <span id="day-count">1</span></div>
                </div>

                <button id="garage-btn"
                    class="bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 px-4 rounded-lg shadow-lg border-b-4 border-indigo-800 active:border-b-0 active:translate-y-1 transition-all flex items-center gap-2">
                    <span>üõ†Ô∏è</span> <span class="text-sm">–ú–∞–π—Å—Ç–µ—Ä–Ω—è</span>
                </button>
                <button id="audio-btn" class="bg-slate-700 p-2 rounded-lg text-xs opacity-50">üîá –ó–≤—É–∫</button>
            </div>
        </div>

        <!-- Warning Label (Boss/Whirlpool) -->
        <div id="warning-label"
            class="absolute top-1/4 left-1/2 -translate-x-1/2 text-red-500 font-bold text-2xl animate-pulse hidden pointer-events-none text-shadow-black">
            ‚ö†Ô∏è –£–í–ê–ì–ê: –ö–†–ê–ö–ï–ù!
        </div>

        <!-- Skills (Bottom Right) -->
        <div class="absolute bottom-6 right-4 flex gap-3 pointer-events-auto">
            <!-- Nitro -->
            <button
                class="skill-btn w-14 h-14 bg-yellow-600 rounded-full border-2 border-yellow-400 shadow-lg flex items-center justify-center text-2xl"
                onclick="game.activateSkill('nitro')">
                ‚ö°
                <div class="skill-cd h-0" id="cd-nitro"></div>
            </button>
            <!-- Flare -->
            <button
                class="skill-btn w-14 h-14 bg-red-600 rounded-full border-2 border-red-400 shadow-lg flex items-center justify-center text-2xl"
                onclick="game.activateSkill('flare')">
                üß®
                <div class="skill-cd h-0" id="cd-flare"></div>
            </button>
            <!-- Repair -->
            <button
                class="skill-btn w-14 h-14 bg-green-600 rounded-full border-2 border-green-400 shadow-lg flex items-center justify-center text-2xl"
                onclick="game.activateSkill('repair')">
                üîß
                <div class="skill-cd h-0" id="cd-repair"></div>
            </button>
        </div>

        <!-- Float Text Container -->
        <div id="notification-area"
            class="absolute top-24 left-0 w-full flex flex-col items-center pointer-events-none gap-1"></div>
    </div>

    <!-- Garage Modal -->
    <div id="garage-modal" class="ui-layer modal interactive hidden flex flex-col p-4 overflow-hidden"
        style="padding-top: max(1rem, var(--tg-content-safe-area-inset-top));">
        <div class="flex justify-between items-center mb-2 border-b border-slate-700 pb-2">
            <div>
                <h2 class="text-xl font-bold text-white">–î–æ–∫ (–ü–∞—É–∑–∞)</h2>
                <div class="flex gap-2 text-[10px] text-slate-400">
                    <button class="hover:text-white underline" onclick="game.switchTab('parts')">–ó–∞–ø—á–∞—Å—Ç–∏–Ω–∏</button>
                    <span>|</span>
                    <button class="hover:text-white underline" onclick="game.switchTab('crew')">–ï–∫—ñ–ø–∞–∂</button>
                </div>
            </div>
            <button id="close-garage" class="text-slate-400 hover:text-white text-2xl px-2">&times;</button>
        </div>

        <!-- TAB: PARTS -->
        <div id="tab-parts" class="flex flex-col flex-grow min-h-0">
            <!-- Equipment -->
            <div class="bg-slate-800/50 p-2 rounded-xl mb-2 border border-slate-700/50">
                <div class="flex justify-between items-center mb-1">
                    <h3 class="text-slate-300 text-[10px] uppercase tracking-wider font-bold">–û—Å–Ω–∞—â–µ–Ω–Ω—è</h3>
                    <span class="text-[10px] text-emerald-400" id="yacht-status">–ü–æ—Ç—Ä—ñ–±–Ω–æ 5 —á–∞—Å—Ç–∏–Ω</span>
                </div>
                <div class="grid grid-cols-5 gap-2">
                    <div class="flex flex-col items-center gap-1 group">
                        <div class="item-slot w-full aspect-square" id="equip-hull" data-type="hull"></div>
                        <div class="text-[9px] text-slate-400 text-center">–ë—Ä–æ–Ω—è</div>
                    </div>
                    <div class="flex flex-col items-center gap-1">
                        <div class="item-slot w-full aspect-square" id="equip-engine" data-type="engine"></div>
                        <div class="text-[9px] text-slate-400 text-center">–†—É—à—ñ–π</div>
                    </div>
                    <div class="flex flex-col items-center gap-1">
                        <div class="item-slot w-full aspect-square" id="equip-cabin" data-type="cabin"></div>
                        <div class="text-[9px] text-slate-400 text-center">–†—É–±–∫–∞</div>
                    </div>
                    <div class="flex flex-col items-center gap-1">
                        <div class="item-slot w-full aspect-square" id="equip-magnet" data-type="magnet"></div>
                        <div class="text-[9px] text-slate-400 text-center">–ú–∞–≥–Ω—ñ—Ç</div>
                    </div>
                    <div class="flex flex-col items-center gap-1">
                        <div class="item-slot w-full aspect-square" id="equip-radar" data-type="radar"></div>
                        <div class="text-[9px] text-slate-400 text-center">–†–∞–¥–∞—Ä</div>
                    </div>
                </div>
            </div>

            <!-- Shop -->
            <div class="mb-2">
                <h3 class="text-slate-300 text-[10px] uppercase tracking-wider font-bold mb-1">–†–∏–Ω–æ–∫ ($10)</h3>
                <div class="grid grid-cols-5 gap-1">
                    <button
                        class="bg-slate-700/80 hover:bg-slate-600 text-white p-1 rounded border border-slate-600 active:scale-95 text-lg"
                        onclick="game.buyItem('hull')">üõ°Ô∏è</button>
                    <button
                        class="bg-slate-700/80 hover:bg-slate-600 text-white p-1 rounded border border-slate-600 active:scale-95 text-lg"
                        onclick="game.buyItem('engine')">‚öôÔ∏è</button>
                    <button
                        class="bg-slate-700/80 hover:bg-slate-600 text-white p-1 rounded border border-slate-600 active:scale-95 text-lg"
                        onclick="game.buyItem('cabin')">üè†</button>
                    <button
                        class="bg-slate-700/80 hover:bg-slate-600 text-white p-1 rounded border border-slate-600 active:scale-95 text-lg"
                        onclick="game.buyItem('magnet')">üß≤</button>
                    <button
                        class="bg-slate-700/80 hover:bg-slate-600 text-white p-1 rounded border border-slate-600 active:scale-95 text-lg"
                        onclick="game.buyItem('radar')">üì°</button>
                </div>
            </div>

            <!-- Inventory -->
            <div class="flex-grow flex flex-col min-h-0">
                <div class="flex justify-between items-center mb-1">
                    <h3 class="text-slate-300 text-[10px] uppercase tracking-wider font-bold">–°–∫–ª–∞–¥</h3>
                    <button class="text-[10px] bg-blue-600 hover:bg-blue-500 px-2 py-0.5 rounded text-white"
                        onclick="game.autoMerge()">Auto-Merge</button>
                </div>
                <div
                    class="bg-slate-800/30 rounded-xl p-2 flex-grow overflow-y-auto custom-scroll border border-slate-700/30">
                    <div class="grid grid-cols-5 gap-2" id="inventory-grid"></div>
                </div>
            </div>
        </div>

        <!-- TAB: CREW -->
        <div id="tab-crew" class="hidden flex-col gap-4">
            <h3 class="text-slate-300 text-sm uppercase tracking-wider font-bold">–ù–∞–π–Ω—è—Ç–∏ –ï–∫—ñ–ø–∞–∂</h3>

            <div class="flex items-center gap-3 bg-slate-800 p-3 rounded-lg border border-slate-700">
                <div class="text-3xl">üë®‚Äçüîß</div>
                <div class="flex-grow">
                    <div class="font-bold text-white">–ú–µ—Ö–∞–Ω—ñ–∫</div>
                    <div class="text-[10px] text-slate-400">–ü–æ–≤—ñ–ª—å–Ω–æ –ª–∞–≥–æ–¥–∏—Ç—å –ø–æ—à–∫–æ–¥–∂–µ–Ω—É –±—Ä–æ–Ω—é</div>
                </div>
                <button id="hire-mech"
                    class="bg-green-600 hover:bg-green-500 text-white text-xs px-3 py-2 rounded font-bold"
                    onclick="game.hireCrew('mechanic')">$500</button>
            </div>

            <div class="flex items-center gap-3 bg-slate-800 p-3 rounded-lg border border-slate-700">
                <div class="text-3xl">üß≠</div>
                <div class="flex-grow">
                    <div class="font-bold text-white">–®—Ç—É—Ä–º–∞–Ω</div>
                    <div class="text-[10px] text-slate-400">–ó–±—ñ–ª—å—à—É—î –æ–≥–ª—è–¥ —Ä–∞–¥–∞—Ä–∞ –Ω–∞ 50%</div>
                </div>
                <button id="hire-nav"
                    class="bg-green-600 hover:bg-green-500 text-white text-xs px-3 py-2 rounded font-bold"
                    onclick="game.hireCrew('navigator')">$500</button>
            </div>

            <p class="text-[10px] text-slate-500 text-center mt-4">–ï–∫—ñ–ø–∞–∂ –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –∑ –≤–∞–º–∏ –Ω–∞–∑–∞–≤–∂–¥–∏.</p>
        </div>
    </div>

    <!-- Game Over Screen -->
    <div id="game-over-modal" class="ui-layer modal interactive hidden flex items-center justify-center z-50">
        <div
            class="bg-slate-900 border border-red-900/50 p-8 rounded-2xl shadow-2xl text-center max-w-sm w-full relative">
            <div class="text-6xl mb-2" id="go-emoji">üíÄ</div>
            <h2 class="text-2xl font-bold text-white mb-2" id="go-title">Game Over</h2>
            <p class="text-sm text-slate-400 mb-6" id="go-reason">...</p>
            <div class="bg-black/40 p-3 rounded mb-6">
                <div class="text-[10px] text-slate-500 uppercase">–ó–±–µ—Ä–µ–∂–µ–Ω–∏–π –ë—é–¥–∂–µ—Ç</div>
                <div class="text-2xl font-mono text-green-400" id="final-score">0</div>
            </div>
            <button onclick="game.respawn()"
                class="w-full bg-red-600 hover:bg-red-500 text-white font-bold py-3 rounded-lg shadow-lg">–í—ñ–¥—Ä–æ–¥–∏—Ç–∏—Å—è</button>
            <button onclick="game.hardReset()" class="mt-2 text-xs text-slate-500 hover:text-red-400">–°–∫–∏–Ω—É—Ç–∏
                –ø—Ä–æ–≥—Ä–µ—Å</button>
        </div>
    </div>

    <script src="js/game.js"></script>
</body>

</html>