<!DOCTYPE html>
<html lang="uk">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–•–æ—á—É –Ø—Ö—Ç—É: Ultimate Survival</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="css/style.css">
</head>

<body style="margin: 0; padding: 0; overflow: hidden; background: #000; color: #e2e8f0;">
    <canvas id="game-canvas"></canvas>
    <div id="cold-vignette"></div>
    <div id="damage-overlay"
        style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;"></div>

    <!-- Money (Top Left) -->
    <div
        style="position: absolute; top: 12px; left: 12px; background: rgba(15, 23, 42, 0.9); padding: 8px; border-radius: 8px; border: 1px solid #334155; display: flex; align-items: center; gap: 12px; min-width: 120px; pointer-events: auto; z-index: 100;">
        <span style="font-size: 20px;">üíµ</span>
        <div>
            <div style="font-size: 10px; color: #94a3b8; text-transform: uppercase; font-weight: bold;">–ë—é–¥–∂–µ—Ç</div>
            <div style="font-family: monospace; font-size: 18px; color: #4ade80;" id="money-display">0</div>
        </div>
    </div>

    <!-- Stats (Top Left) -->
    <div
        style="position: absolute; top: 72px; left: 12px; background: rgba(15, 23, 42, 0.9); padding: 8px; border-radius: 8px; border: 1px solid #334155; width: 192px; pointer-events: auto; z-index: 100;">
        <div style="margin-bottom: 8px;">
            <div style="display: flex; justify-content: space-between; font-size: 10px; margin-bottom: 2px;">
                <span style="color: #94a3b8;">üõ°Ô∏è –ë—Ä–æ–Ω—è</span>
                <span id="armor-val" style="color: white; font-weight: bold;">Lvl 0</span>
            </div>
            <div style="width: 100%; background: #1e293b; height: 6px; border-radius: 9999px; overflow: hidden;">
                <div id="hp-bar" style="background: #10b981; height: 100%; width: 100%; transition: all 0.3s;"></div>
            </div>
        </div>
        <div>
            <div style="display: flex; justify-content: space-between; font-size: 10px; margin-bottom: 2px;">
                <span style="color: #94a3b8;">üå°Ô∏è –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞</span>
                <span id="temp-val" style="color: white; font-weight: bold;">36.6¬∞C</span>
            </div>
            <div style="width: 100%; background: #1e293b; height: 6px; border-radius: 9999px; overflow: hidden;">
                <div id="temp-bar" style="background: #fb923c; height: 100%; width: 100%; transition: all 0.3s;"></div>
            </div>
        </div>
    </div>

    <!-- Mission Panel -->
    <div id="mission-panel"
        style="position: absolute; top: 172px; left: 12px; display: none; padding: 8px; border-radius: 0 8px 8px 0; max-width: 200px; background: linear-gradient(90deg, rgba(15, 23, 42, 0.9), transparent); border-left: 4px solid #facc15; z-index: 100;">
        <div style="font-size: 10px; color: #facc15; font-weight: bold; text-transform: uppercase; margin-bottom: 4px;">
            –ê–∫—Ç–∏–≤–Ω–∞ –ú—ñ—Å—ñ—è</div>
        <div id="mission-desc" style="font-size: 14px; color: white; font-weight: 600;">–î–æ—Å—Ç–∞–≤—Ç–µ –≤–∞–Ω—Ç–∞–∂</div>
        <div style="font-size: 10px; color: #94a3b8; margin-top: 4px; display: flex; justify-content: space-between;">
            <span id="mission-dist">0m</span>
            <span style="color: #4ade80;" id="mission-reward">$100</span>
        </div>
    </div>

    <!-- Biome (Top Right) -->
    <div
        style="position: absolute; top: 12px; right: 12px; background: rgba(15, 23, 42, 0.9); padding: 8px; border-radius: 8px; border: 1px solid #334155; text-align: right; min-width: 100px; pointer-events: auto; z-index: 100;">
        <div id="biome-display" style="font-size: 14px; font-weight: bold; color: #22d3ee;">üèùÔ∏è –¢—Ä–æ–ø—ñ–∫–∏</div>
        <div style="font-size: 9px; color: #64748b; margin-top: 4px;">–î–µ–Ω—å: <span id="day-count">1</span></div>
    </div>

    <!-- Workshop Button (Top Right) -->
    <button id="garage-btn"
        style="position: absolute; top: 72px; right: 12px; background: #4f46e5; color: white; font-weight: bold; padding: 8px 16px; border-radius: 8px; border: none; border-bottom: 4px solid #3730a3; cursor: pointer; display: flex; align-items: center; gap: 8px; z-index: 100;">
        <span>üõ†Ô∏è</span> <span style="font-size: 14px;">–ú–∞–π—Å—Ç–µ—Ä–Ω—è</span>
    </button>

    <!-- Audio Button -->
    <button id="audio-btn"
        style="position: absolute; top: 124px; right: 12px; background: #334155; color: white; padding: 8px; border-radius: 8px; font-size: 12px; opacity: 0.5; border: none; cursor: pointer; z-index: 100;">üîá
        –ó–≤—É–∫</button>

    <!-- Warning Label -->
    <div id="warning-label"
        style="position: absolute; top: 25%; left: 50%; transform: translateX(-50%); color: #ef4444; font-weight: bold; font-size: 24px; display: none; z-index: 100;">
        ‚ö†Ô∏è –£–í–ê–ì–ê: –ö–†–ê–ö–ï–ù!</div>

    <!-- Skills (Bottom Right) -->
    <div style="position: absolute; bottom: 24px; right: 16px; display: flex; gap: 12px; z-index: 100;">
        <button
            style="position: relative; overflow: hidden; width: 56px; height: 56px; background: #ca8a04; border-radius: 50%; border: 2px solid #facc15; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 24px;"
            onclick="game.activateSkill('nitro')">
            ‚ö°
            <div id="cd-nitro"
                style="position: absolute; bottom: 0; left: 0; width: 100%; background: rgba(0, 0, 0, 0.6); height: 0;">
            </div>
        </button>
        <button
            style="position: relative; overflow: hidden; width: 56px; height: 56px; background: #dc2626; border-radius: 50%; border: 2px solid #f87171; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 24px;"
            onclick="game.activateSkill('flare')">
            üß®
            <div id="cd-flare"
                style="position: absolute; bottom: 0; left: 0; width: 100%; background: rgba(0, 0, 0, 0.6); height: 0;">
            </div>
        </button>
        <button
            style="position: relative; overflow: hidden; width: 56px; height: 56px; background: #16a34a; border-radius: 50%; border: 2px solid #4ade80; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 24px;"
            onclick="game.activateSkill('repair')">
            üîß
            <div id="cd-repair"
                style="position: absolute; bottom: 0; left: 0; width: 100%; background: rgba(0, 0, 0, 0.6); height: 0;">
            </div>
        </button>
    </div>

    <!-- Garage Modal -->
    <div id="garage-modal" class="ui-layer modal interactive hidden flex flex-col p-4 overflow-hidden">
        <div class="flex justify-between items-center mb-2 border-b border-slate-700 pb-2">
            <div>
                <h2 class="text-xl font-bold text-white">–î–æ–∫ (–ü–∞—É–∑–∞)</h2>
                <div class="flex gap-2 text-[10px] text-slate-400">
                    <button class="hover:text-white underline" onclick="game.switchTab('parts')">–ó–∞–ø—á–∞—Å—Ç–∏–Ω–∏</button>
                    <span>|</span>
                    <button class="hover:text-white underline" onclick="game.switchTab('crew')">–ï–∫—ñ–ø–∞–∂</button>
                </div>
            </div>
            <button id="close-garage" class="text-slate-400 hover:text-white text-2xl px-2">&times;</button>
        </div>
        <div id="tab-parts" class="flex flex-col flex-grow min-h-0">
            <div class="bg-slate-800/50 p-2 rounded-xl mb-2 border border-slate-700/50">
                <div class="flex justify-between items-center mb-1">
                    <h3 class="text-slate-300 text-[10px] uppercase tracking-wider font-bold">–û—Å–Ω–∞—â–µ–Ω–Ω—è</h3>
                    <span class="text-[10px] text-emerald-400" id="yacht-status">–ü–æ—Ç—Ä—ñ–±–Ω–æ 5 —á–∞—Å—Ç–∏–Ω</span>
                </div>
                <div class="grid grid-cols-5 gap-2">
                    <div class="flex flex-col items-center gap-1">
                        <div class="item-slot w-full aspect-square" id="equip-hull" data-type="hull"></div>
                        <div class="text-[9px] text-slate-400 text-center">–ë—Ä–æ–Ω—è</div>
                    </div>
                    <div class="flex flex-col items-center gap-1">
                        <div class="item-slot w-full aspect-square" id="equip-engine" data-type="engine"></div>
                        <div class="text-[9px] text-slate-400 text-center">–†—É—à—ñ–π</div>
                    </div>
                    <div class="flex flex-col items-center gap-1">
                        <div class="item-slot w-full aspect-square" id="equip-cabin" data-type="cabin"></div>
                        <div class="text-[9px] text-slate-400 text-center">–†—É–±–∫–∞</div>
                    </div>
                    <div class="flex flex-col items-center gap-1">
                        <div class="item-slot w-full aspect-square" id="equip-magnet" data-type="magnet"></div>
                        <div class="text-[9px] text-slate-400 text-center">–ú–∞–≥–Ω—ñ—Ç</div>
                    </div>
                    <div class="flex flex-col items-center gap-1">
                        <div class="item-slot w-full aspect-square" id="equip-radar" data-type="radar"></div>
                        <div class="text-[9px] text-slate-400 text-center">–†–∞–¥–∞—Ä</div>
                    </div>
                </div>
            </div>
            <div class="mb-2">
                <h3 class="text-slate-300 text-[10px] uppercase tracking-wider font-bold mb-1">–†–∏–Ω–æ–∫ ($10)</h3>
                <div class="grid grid-cols-5 gap-1">
                    <button
                        class="bg-slate-700/80 hover:bg-slate-600 text-white p-1 rounded border border-slate-600 text-lg"
                        onclick="game.buyItem('hull')">üõ°Ô∏è</button>
                    <button
                        class="bg-slate-700/80 hover:bg-slate-600 text-white p-1 rounded border border-slate-600 text-lg"
                        onclick="game.buyItem('engine')">‚öôÔ∏è</button>
                    <button
                        class="bg-slate-700/80 hover:bg-slate-600 text-white p-1 rounded border border-slate-600 text-lg"
                        onclick="game.buyItem('cabin')">üè†</button>
                    <button
                        class="bg-slate-700/80 hover:bg-slate-600 text-white p-1 rounded border border-slate-600 text-lg"
                        onclick="game.buyItem('magnet')">üß≤</button>
                    <button
                        class="bg-slate-700/80 hover:bg-slate-600 text-white p-1 rounded border border-slate-600 text-lg"
                        onclick="game.buyItem('radar')">üì°</button>
                </div>
            </div>
            <div class="flex-grow flex flex-col min-h-0">
                <div class="flex justify-between items-center mb-1">
                    <h3 class="text-slate-300 text-[10px] uppercase tracking-wider font-bold">–°–∫–ª–∞–¥</h3>
                    <button class="text-[10px] bg-blue-600 hover:bg-blue-500 px-2 py-0.5 rounded text-white"
                        onclick="game.autoMerge()">Auto-Merge</button>
                </div>
                <div
                    class="bg-slate-800/30 rounded-xl p-2 flex-grow overflow-y-auto custom-scroll border border-slate-700/30">
                    <div class="grid grid-cols-5 gap-2" id="inventory-grid"></div>
                </div>
            </div>
        </div>
        <div id="tab-crew" class="hidden flex-col gap-4">
            <h3 class="text-slate-300 text-sm uppercase tracking-wider font-bold">–ù–∞–π–Ω—è—Ç–∏ –ï–∫—ñ–ø–∞–∂</h3>
            <div class="flex items-center gap-3 bg-slate-800 p-3 rounded-lg border border-slate-700">
                <div class="text-3xl">üë®‚Äçüîß</div>
                <div class="flex-grow">
                    <div class="font-bold text-white">–ú–µ—Ö–∞–Ω—ñ–∫</div>
                    <div class="text-[10px] text-slate-400">–ü–æ–≤—ñ–ª—å–Ω–æ –ª–∞–≥–æ–¥–∏—Ç—å –ø–æ—à–∫–æ–¥–∂–µ–Ω—É –±—Ä–æ–Ω—é</div>
                </div>
                <button id="hire-mech"
                    class="bg-green-600 hover:bg-green-500 text-white text-xs px-3 py-2 rounded font-bold"
                    onclick="game.hireCrew('mechanic')">$500</button>
            </div>
            <div class="flex items-center gap-3 bg-slate-800 p-3 rounded-lg border border-slate-700">
                <div class="text-3xl">üß≠</div>
                <div class="flex-grow">
                    <div class="font-bold text-white">–®—Ç—É—Ä–º–∞–Ω</div>
                    <div class="text-[10px] text-slate-400">–ó–±—ñ–ª—å–∫—É—î –æ–≥–ª—è–¥ —Ä–∞–¥–∞—Ä–∞ –Ω–∞ 50%</div>
                </div>
                <button id="hire-nav"
                    class="bg-green-600 hover:bg-green-500 text-white text-xs px-3 py-2 rounded font-bold"
                    onclick="game.hireCrew('navigator')">$500</button>
            </div>
            <p class="text-[10px] text-slate-500 text-center mt-4">–ï–∫—ñ–ø–∞–∂ –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –∑ –≤–∞–º–∏ –Ω–∞–∑–∞–≤–∂–¥–∏.</p>
        </div>
    </div>

    <!-- Game Over Screen -->
    <div id="game-over-modal" class="ui-layer modal interactive hidden flex items-center justify-center z-50">
        <div
            class="bg-slate-900 border border-red-900/50 p-8 rounded-2xl shadow-2xl text-center max-w-sm w-full relative">
            <div class="text-6xl mb-2" id="go-emoji">üíÄ</div>
            <h2 class="text-2xl font-bold text-white mb-2" id="go-title">Game Over</h2>
            <p class="text-sm text-slate-400 mb-6" id="go-reason">...</p>
            <div class="bg-black/40 p-3 rounded mb-6">
                <div class="text-[10px] text-slate-500 uppercase">–ó–±–µ—Ä–µ–∂–µ–Ω–∏–π –ë—é–¥–∂–µ—Ç</div>
                <div class="text-2xl font-mono text-green-400" id="final-score">0</div>
            </div>
            <button onclick="game.respawn()"
                class="w-full bg-red-600 hover:bg-red-500 text-white font-bold py-3 rounded-lg shadow-lg">–í—ñ–¥—Ä–æ–¥–∏—Ç–∏—Å—è</button>
            <button onclick="game.hardReset()" class="mt-2 text-xs text-slate-500 hover:text-red-400">–°–∫–∏–Ω—É—Ç–∏
                –ø—Ä–æ–≥—Ä–µ—Å</button>
        </div>
    </div>

    <script src="js/game.js"></script>
</body>

</html>